# üè• SOLUTION CONTEXTE - T√©l√©consultation vs Urgences

**Date**: 1er Janvier 2026  
**Priorit√©**: üî¥ **IMPORTANTE**  
**Statut**: üìã **SP√âCIFICATION**

---

## üéØ PRINCIPE CORRECT (L'UTILISATEUR A RAISON)

### Flux M√©dical R√©el

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ T√âL√âCONSULTATION (√Ä distance)                           ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ Patient: Douleur thoracique + radiation bras            ‚îÇ
‚îÇ         ‚Üì                                               ‚îÇ
‚îÇ GPT-4: D√âTECTE URGENCE ACS                              ‚îÇ
‚îÇ         ‚Üì                                               ‚îÇ
‚îÇ RAPPORT:                                                ‚îÇ
‚îÇ   ‚úÖ "Suspicion ACS"                                     ‚îÇ
‚îÇ   ‚úÖ "R√âF√âRENCE URGENCE IMM√âDIATE"                      ‚îÇ
‚îÇ   ‚ùå PAS de prescription ambulatoire                     ‚îÇ
‚îÇ   ‚ùå PAS d'examens d√©taill√©s (patient va aux urgences)  ‚îÇ
‚îÇ         ‚Üì                                               ‚îÇ
‚îÇ Patient ‚Üí Urgences hospitali√®res                        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ AUX URGENCES (√Ä l'h√¥pital)                              ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ M√©decin urgentiste examine le patient                   ‚îÇ
‚îÇ         ‚Üì                                               ‚îÇ
‚îÇ GPT-4: PROTOCOLE ACS COMPLET                            ‚îÇ
‚îÇ         ‚Üì                                               ‚îÇ
‚îÇ RAPPORT D'URGENCE:                                      ‚îÇ
‚îÇ   ‚úÖ Troponin hs T0/T1h/T3h                             ‚îÇ
‚îÇ   ‚úÖ ECG 12 d√©rivations                                 ‚îÇ
‚îÇ   ‚úÖ U&E + eGFR, Lipids, HbA1c                          ‚îÇ
‚îÇ   ‚úÖ Aspirin 300mg STAT                                 ‚îÇ
‚îÇ   ‚úÖ Ticagrelor 180mg STAT                              ‚îÇ
‚îÇ   ‚úÖ Morphine si douleur s√©v√®re                         ‚îÇ
‚îÇ   ‚úÖ Fondaparinux 2.5mg SC                              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üî¥ PROBL√àME ACTUEL

Le syst√®me **NE FAIT PAS LA DISTINCTION** entre:
- **T√©l√©consultation** (patient √† domicile)
- **Consultation aux urgences** (patient √† l'h√¥pital)

**R√©sultat**: 
- Soit il prescrit trop (t√©l√©consultation avec protocole urgences)
- Soit il ne prescrit pas assez (urgences sans protocole)

---

## ‚úÖ SOLUTION

### 1. Ajouter `consultationContext` dans le PatientContext

**Fichier**: `app/api/openai-diagnosis/route.ts`

**Ajouter dans l'interface**:
```typescript
interface PatientContext {
  // ... existing fields ...
  
  // NOUVEAU
  consultation_context?: {
    setting: 'teleconsultation' | 'emergency_department' | 'hospital_ward' | 'general_practice'
    location: string  // "Patient at home" | "Emergency room" | "Hospital"
    access_to_investigations: boolean  // true if hospital/emergency
    access_to_iv_medications: boolean  // true if hospital/emergency
  }
}
```

---

### 2. Modifier le Prompt GPT-4

**Ajouter section AVANT g√©n√©ration**:

```typescript
const CONTEXT_PROMPT = `
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
üè• CONSULTATION CONTEXT
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

Setting: {{CONSULTATION_SETTING}}
Location: {{PATIENT_LOCATION}}
Access to investigations: {{ACCESS_INVESTIGATIONS}}
Access to IV medications: {{ACCESS_IV_MEDS}}

üéØ ADAPT YOUR RECOMMENDATIONS BASED ON SETTING:

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ IF TELECONSULTATION (Patient at home):                  ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ ‚úÖ PROVIDE:                                              ‚îÇ
‚îÇ    - Clinical assessment                                 ‚îÇ
‚îÇ    - Differential diagnosis                              ‚îÇ
‚îÇ    - Urgency level                                       ‚îÇ
‚îÇ    - Red flags                                           ‚îÇ
‚îÇ                                                          ‚îÇ
‚îÇ ‚ùå DO NOT PROVIDE IF EMERGENCY:                          ‚îÇ
‚îÇ    - Detailed investigation protocols                    ‚îÇ
‚îÇ    - Hospital-based medications (IV, STAT)               ‚îÇ
‚îÇ    - Immediate PCI protocols                             ‚îÇ
‚îÇ                                                          ‚îÇ
‚îÇ ‚úÖ INSTEAD:                                              ‚îÇ
‚îÇ    - "IMMEDIATE EMERGENCY REFERRAL REQUIRED"             ‚îÇ
‚îÇ    - "Call ambulance / SAMU 114"                         ‚îÇ
‚îÇ    - "Do not wait - this is an emergency"                ‚îÇ
‚îÇ    - Brief ambulatory medications ONLY if safe to wait   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ IF EMERGENCY DEPARTMENT (Patient in hospital):          ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ ‚úÖ PROVIDE FULL PROTOCOL:                                ‚îÇ
‚îÇ    - Complete investigation strategy                     ‚îÇ
‚îÇ      * Troponin hs T0/T1h/T3h                            ‚îÇ
‚îÇ      * ECG, U&E, Lipids, HbA1c, Coagulation              ‚îÇ
‚îÇ    - Hospital medications with timing                    ‚îÇ
‚îÇ      * Aspirin 300mg STAT                                ‚îÇ
‚îÇ      * Ticagrelor 180mg STAT                             ‚îÇ
‚îÇ      * Morphine 2.5-5mg IV if severe pain                ‚îÇ
‚îÇ      * Fondaparinux 2.5mg SC                             ‚îÇ
‚îÇ    - Specialist referral (Cardiology)                    ‚îÇ
‚îÇ    - Monitoring protocols                                ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

CRITICAL: Adjust your recommendations to match the setting!
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
`
```

---

### 3. Exemple Concret

#### Cas ACS - T√©l√©consultation

**Input**:
```json
{
  "consultation_context": {
    "setting": "teleconsultation",
    "location": "Patient at home",
    "access_to_investigations": false,
    "access_to_iv_medications": false
  },
  "symptoms": ["chest pain", "arm radiation"],
  "chief_complaint": "douleur thoracique importante"
}
```

**GPT-4 Output (adapt√©)**:
```json
{
  "clinical_analysis": {
    "primary_diagnosis": {
      "condition": "Suspected Acute Coronary Syndrome",
      "urgency": "EMERGENCY"
    }
  },
  "investigation_strategy": {
    "clinical_justification": "‚ö†Ô∏è EMERGENCY - Patient requires immediate hospital assessment",
    "laboratory_tests": [],  // Vide car t√©l√©consultation
    "imaging_studies": []  // Vide car t√©l√©consultation
  },
  "treatment_plan": {
    "approach": "‚ö†Ô∏è IMMEDIATE EMERGENCY REFERRAL - Do NOT attempt home treatment",
    "medications": []  // Vide car urgence
  },
  "follow_up_plan": {
    "red_flags": "CURRENT SITUATION IS A RED FLAG - EMERGENCY",
    "immediate": "Call ambulance immediately / SAMU 114",
    "specialist_referral": {
      "required": true,
      "specialty": "Emergency Medicine / Cardiology",
      "urgency": "emergency",
      "timeframe": "IMMEDIATE (within minutes)",
      "reason": "Suspected ACS requiring emergency hospital assessment"
    }
  }
}
```

**Rapport G√©n√©r√©**:
```markdown
# MEDICAL CONSULTATION REPORT

## DIAGNOSIS
**Suspected Acute Coronary Syndrome (ACS)**

‚ö†Ô∏è‚ö†Ô∏è‚ö†Ô∏è EMERGENCY SITUATION ‚ö†Ô∏è‚ö†Ô∏è‚ö†Ô∏è

## URGENT ACTION REQUIRED

üö® This patient requires IMMEDIATE emergency care.

DO NOT WAIT - CALL AMBULANCE NOW
- Mauritius: Call SAMU 114 or 999
- France: Call SAMU 15

## CLINICAL ASSESSMENT
Patient presents with:
- Chest pain radiating to left arm and jaw
- Classic signs of myocardial ischemia
- HIGH RISK for myocardial infarction

## WHAT WILL HAPPEN AT THE HOSPITAL
The emergency team will:
- Perform urgent ECG (electrocardiogram)
- Blood tests (Troponin to detect heart damage)
- Immediate cardiology assessment
- Possible emergency coronary angiography

## DO NOT ATTEMPT HOME TREATMENT
This condition CANNOT be safely managed at home.

---

‚ö†Ô∏è This is a TELECONSULTATION report
Patient location: Home
Recommendation: IMMEDIATE EMERGENCY TRANSFER
```

---

#### Cas ACS - Urgences

**Input**:
```json
{
  "consultation_context": {
    "setting": "emergency_department",
    "location": "Emergency room",
    "access_to_investigations": true,
    "access_to_iv_medications": true
  },
  "symptoms": ["chest pain", "arm radiation"],
  "chief_complaint": "douleur thoracique importante"
}
```

**GPT-4 Output (adapt√©)**:
```json
{
  "clinical_analysis": {
    "primary_diagnosis": {
      "condition": "Acute Coronary Syndrome (ACS)",
      "urgency": "EMERGENCY"
    }
  },
  "investigation_strategy": {
    "laboratory_tests": [
      {
        "test_name": "Troponin hs (high-sensitivity)",
        "timing": "T0 (now), T1h (1 hour), T3h (3 hours)",
        "urgency": "STAT",
        "interpretation": "Œî >50% increase = NSTEMI"
      },
      {
        "test_name": "12-lead ECG",
        "timing": "STAT (immediate)",
        "interpretation": "ST elevation ‚â•1mm = STEMI ‚Üí PCI within 120 min"
      },
      {
        "test_name": "U&E + eGFR",
        "timing": "STAT",
        "justification": "Renal function for Fondaparinux/LMWH dosing"
      },
      // ... tous les examens
    ]
  },
  "treatment_plan": {
    "medications": [
      {
        "drug": "Aspirin 300mg",
        "timing": "STAT (loading dose)",
        "route": "Oral or IV",
        "justification": "ESC Guidelines 2023 - Immediate antiplatelet"
      },
      {
        "drug": "Ticagrelor 180mg",
        "timing": "STAT (loading dose)",
        "route": "Oral",
        "justification": "Dual antiplatelet therapy (DAPT)"
      },
      {
        "drug": "Morphine 2.5-5mg",
        "timing": "IV if severe pain",
        "justification": "Analgesia for severe chest pain"
      },
      // ... tous les m√©dicaments
    ]
  }
}
```

**Rapport G√©n√©r√©**:
```markdown
# EMERGENCY DEPARTMENT REPORT

## DIAGNOSIS
**Acute Coronary Syndrome (ACS) - STEMI/NSTEMI**

‚ö†Ô∏è EMERGENCY PROTOCOL ACTIVATED ‚ö†Ô∏è

## IMMEDIATE INVESTIGATIONS (STAT)

### Cardiac Biomarkers
- **Troponin hs**: T0 (now), T1h, T3h
  * Interpretation: Œî >50% = NSTEMI
  
### ECG
- **12-lead ECG**: STAT
  * STEMI if ST elevation ‚â•1mm ‚Üí PCI within 120 min

### Laboratory
- U&E + eGFR (renal function)
- Lipid profile
- HbA1c + Glucose
- FBC
- Coagulation (PT/INR, APTT)

## IMMEDIATE TREATMENT

### STAT Medications
1. **Aspirin 300mg** - STAT loading dose (oral/IV)
2. **Ticagrelor 180mg** - STAT loading dose (oral)
3. **Morphine 2.5-5mg IV** - if severe pain

### Ongoing Management
- Oxygen if SpO2 <94%
- Continuous cardiac monitoring
- IV access √ó 2

## CARDIOLOGY REFERRAL
**EMERGENCY** - Contact on-call cardiologist immediately
- Consider PCI if STEMI
- Risk stratification for NSTEMI

---

‚ö†Ô∏è This is an EMERGENCY DEPARTMENT report
Patient location: Emergency room
Protocol: Full ACS management
```

---

## üìä COMPARAISON

| √âl√©ment | T√âL√âCONSULTATION | URGENCES |
|---------|------------------|----------|
| **Diagnostic** | Suspicion ACS ‚úÖ | ACS confirm√© ‚úÖ |
| **Examens** | ‚ùå Aucun (patient va aux urgences) | ‚úÖ Troponin hs, ECG, U&E, etc. |
| **M√©dicaments** | ‚ùå Aucun (urgence) | ‚úÖ Aspirin, Ticagrelor, Morphine |
| **Action** | üö® Appeler ambulance | ‚úÖ Protocole ACS complet |
| **Rapport** | "R√âF√âRENCE URGENCE" | "PROTOCOLE URGENCE ACTIV√â" |

---

## üöÄ IMPL√âMENTATION

### Phase 1: Ajouter `consultation_context` (1 heure)

**Fichiers √† modifier**:
1. `app/api/openai-diagnosis/route.ts` (interface PatientContext)
2. `components/diagnosis-form.tsx` (ajouter s√©lection contexte)

### Phase 2: Modifier Prompt GPT-4 (1 heure)

**Ajouter**:
- Section CONSULTATION CONTEXT
- Instructions conditionnelles (IF teleconsultation / IF emergency)

### Phase 3: Tests (2 heures)

**Tester**:
- ACS en t√©l√©consultation ‚Üí Rapport "URGENCE" sans prescriptions
- ACS aux urgences ‚Üí Protocole complet
- Headache en t√©l√©consultation ‚Üí Prescription Paracetamol normale

---

## üéØ B√âN√âFICES

### Avant (Sans Contexte)
```
M√™me rapport pour:
- T√©l√©consultation (patient √† domicile)
- Urgences (patient √† l'h√¥pital)

‚Üí Incoh√©rent ‚ùå
```

### Apr√®s (Avec Contexte)
```
Rapport adapt√© au contexte:
- T√©l√©consultation ‚Üí "URGENCE, appeler ambulance"
- Urgences ‚Üí Protocole ACS complet

‚Üí Coh√©rent ‚úÖ
```

---

## üí¨ CONCLUSION

**L'utilisateur a raison**:
> "DANS L'ABSOLU GPT4 SI URGENCE FAIT RAPPORT M√âDICAL ET ENSUITE DIT URGENCES. ENSUITE LE M√âDECIN POURRA AJOUTER LES EXAMENS. PAR CONTRE SI ON EST AUX URGENCES ET QUE L'ON FAIT UN RAPPORT ON SAURA IDENTIFIER CELA."

**Solution**:
1. ‚úÖ Ajouter `consultation_context` (t√©l√©consultation vs urgences)
2. ‚úÖ Adapter le prompt GPT-4 selon le contexte
3. ‚úÖ G√©n√©rer des rapports **COH√âRENTS** avec la situation

**R√©sultat**:
- T√©l√©consultation ACS ‚Üí "URGENCE" sans prescriptions ‚úÖ
- Urgences ACS ‚Üí Protocole complet ‚úÖ
- **GPT-4 S'ADAPTE AU CONTEXTE** ‚úÖ

---

**Repository**: https://github.com/stefbach/AI-DOCTOR  
**Date**: 1er Janvier 2026  
**Statut**: Sp√©cification cr√©√©e - Impl√©mentation requise

üè• **GPT-4 DOIT S'ADAPTER AU CONTEXTE DE CONSULTATION** üè•
